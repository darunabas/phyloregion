<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Benchmark â€¢ phyloregion</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Benchmark">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">phyloregion</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Benchmark.html">Benchmark</a>
    </li>
    <li>
      <a href="../articles/phyloregion-intro.html">An introduction to the phyloregion package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/darunabas/phyloregion">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Benchmark</h1>
                        <h4 class="author">Klaus Schliep</h4>
            
            <h4 class="date">February 07, 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/darunabas/phyloregion/blob/master/vignettes/Benchmark.Rmd"><code>vignettes/Benchmark.Rmd</code></a></small>
      <div class="hidden name"><code>Benchmark.Rmd</code></div>

    </div>

    
    
<div id="a-small-benchmark-study" class="section level2">
<h2 class="hasAnchor">
<a href="#a-small-benchmark-study" class="anchor"></a>A small benchmark study</h2>
<p>In this vignette we will benchmark several common functions for several packages computing phylogenetic diversity (Faith 1992), beta diversity and phylogenetic beta diversity.</p>
<p>Lets load first a all the packages we are going to use.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ape)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(Matrix)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bench)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co"># packages we benchmark</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(phyloregion)</a></code></pre></div>
<pre><code>## 
## Attaching package: 'phyloregion'</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     colSums, rowSums</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(betapart)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(picante)</a></code></pre></div>
<pre><code>## Loading required package: vegan</code></pre>
<pre><code>## Loading required package: permute</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## This is vegan 2.5-6</code></pre>
<pre><code>## Loading required package: nlme</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(vegan)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(hilldiv)</a></code></pre></div>
<pre><code>## Registered S3 methods overwritten by 'huge':
##   method    from   
##   plot.sim  BDgraph
##   print.sim BDgraph</code></pre>
<pre><code>## Registered S3 method overwritten by 'geiger':
##   method            from
##   unique.multiPhylo ape</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(BAT) </a></code></pre></div>
<pre><code>## 
## Attaching package: 'BAT'</code></pre>
<pre><code>## The following object is masked from 'package:betapart':
## 
##     beta.multi</code></pre>
<pre><code>## The following object is masked from 'package:ggplot2':
## 
##     alpha</code></pre>
<pre><code>## The following object is masked from 'package:base':
## 
##     beta</code></pre>
<p>We will use a small data set which comes with <code>phyloregion</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(africa)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="co"># subset matrix</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">X_sparse &lt;-<span class="st"> </span>africa<span class="op">$</span>comm[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>, ]</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">X_sparse &lt;-<span class="st"> </span>X_sparse[, <span class="kw">colSums</span>(X_sparse)<span class="op">&gt;</span><span class="dv">0</span>]</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">X_dense &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span>(X_sparse)</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">Xt_dense &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(X_dense)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7"></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/utils/object.size.html">object.size</a></span>(X_sparse)</a></code></pre></div>
<pre><code>## 76504 bytes</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/object.size.html">object.size</a></span>(X_dense)</a></code></pre></div>
<pre><code>## 134752 bytes</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(X_sparse)</a></code></pre></div>
<pre><code>## [1]  30 401</code></pre>
<p>To compare results and start the analysis often we need to reformat the input or results. E.g. for the <code>hilldiv</code> package the community matrix needs to be transposed. These transformations influence the timings usually only marginal. For the benchmarking we use the package bench as it returns timings and provides some information about memory allocations.</p>
<div id="beta-diversity" class="section level3">
<h3 class="hasAnchor">
<a href="#beta-diversity" class="anchor"></a>Beta diversity</h3>
<p>For beta diversity there is only a small advantage:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">chk_fun &lt;-<span class="st"> </span><span class="cf">function</span>(target, current)</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">    <span class="kw"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span>(target, current, <span class="dt">check.attributes =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"></a>
<a class="sourceLine" id="cb24-4" data-line-number="4">fun_phyloregion &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span>(phyloregion<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/phyloregion/man/beta_diss.html">beta_diss</a></span>(x)[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">fun_betapart &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span>(betapart<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/betapart/man/beta.pair.html">beta.pair</a></span>(x)[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">fun_vegan  &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span>(vegan<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/vegan/man/vegdist.html">vegdist</a></span>(x, <span class="dt">binary=</span><span class="ot">TRUE</span>)) </a>
<a class="sourceLine" id="cb24-7" data-line-number="7">fun_BAT &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span>(BAT<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/BAT/man/beta.html">beta</a></span>(x, <span class="dt">func =</span> <span class="st">"Soerensen"</span>)[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">results &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/mark.html">mark</a></span>(<span class="kw">fun_phyloregion</span>(X_sparse), <span class="kw">fun_betapart</span>(X_dense), </a>
<a class="sourceLine" id="cb24-9" data-line-number="9">                       <span class="kw">fun_vegan</span>(X_dense), <span class="kw">fun_BAT</span>(X_dense), <span class="dt">check=</span>chk_fun)</a></code></pre></div>
<pre><code>## Warning: Some expressions had a GC in every iteration; so filtering is disabled.</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(results)</a></code></pre></div>
<pre><code>## Warning: Some expressions had a GC in every iteration; so filtering is disabled.</code></pre>
<pre><code>## Registered S3 method overwritten by 'cli':
##   method     from    
##   print.boxx spatstat</code></pre>
<pre><code>## # A tibble: 4 x 6
##   expression                     min   median `itr/sec` mem_alloc `gc/sec`
##   &lt;bch:expr&gt;                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;
## 1 fun_phyloregion(X_sparse)  986.9Âµs   1.51ms     578.   591.94KB     8.00
## 2 fun_betapart(X_dense)          1ms   1.35ms     392.   601.23KB    11.6 
## 3 fun_vegan(X_dense)         934.2Âµs   1.37ms     532.     1.02MB    26.0 
## 4 fun_BAT(X_dense)            73.2ms  77.46ms      12.8   31.76MB    23.8</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(results)</a></code></pre></div>
<pre><code>## Loading required namespace: tidyr</code></pre>
<p><img src="Benchmark_files/figure-html/beta_diversity-1.png" width="700"></p>
</div>
<div id="phylogenetic-diversity-faith-1992" class="section level3">
<h3 class="hasAnchor">
<a href="#phylogenetic-diversity-faith-1992" class="anchor"></a>Phylogenetic diversity (Faith 1992)</h3>
<p>The is a large difference in memory allocations and running time for Faithâ€™s phylogenetic diversity.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">tree &lt;-<span class="st"> </span>africa<span class="op">$</span>phylo</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">tree &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/ape/man/drop.tip.html">keep.tip</a></span>(tree, <span class="kw"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(X_sparse))  </a>
<a class="sourceLine" id="cb32-3" data-line-number="3"></a>
<a class="sourceLine" id="cb32-4" data-line-number="4">pd_picante &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree){</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">    res &lt;-<span class="st"> </span>picante<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/picante/man/pd.html">pd</a></span>(x, tree)[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">    <span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(res) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span>(x)</a>
<a class="sourceLine" id="cb32-7" data-line-number="7">    res    </a>
<a class="sourceLine" id="cb32-8" data-line-number="8">}    </a>
<a class="sourceLine" id="cb32-9" data-line-number="9">pd_hilldiv &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree) hilldiv<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/hilldiv/man/index_div.html">index_div</a></span>(x, tree, <span class="dt">index=</span><span class="st">"faith"</span>)</a>
<a class="sourceLine" id="cb32-10" data-line-number="10">pd_phyloregion &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree) phyloregion<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/phyloregion/man/PD.html">PD</a></span>(x, tree) </a>
<a class="sourceLine" id="cb32-11" data-line-number="11"></a>
<a class="sourceLine" id="cb32-12" data-line-number="12">results &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/mark.html">mark</a></span>(<span class="kw">pd_picante</span>(X_dense, tree),</a>
<a class="sourceLine" id="cb32-13" data-line-number="13">          <span class="kw">pd_hilldiv</span>(Xt_dense,<span class="dt">tree=</span>tree),</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">          <span class="kw">pd_phyloregion</span>(X_sparse, tree))</a></code></pre></div>
<pre><code>## Warning: Some expressions had a GC in every iteration; so filtering is disabled.</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(results)</a></code></pre></div>
<pre><code>## Warning: Some expressions had a GC in every iteration; so filtering is disabled.</code></pre>
<pre><code>## # A tibble: 3 x 6
##   expression                             min   median `itr/sec` mem_alloc
##   &lt;bch:expr&gt;                        &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;
## 1 pd_picante(X_dense, tree)         157.65ms 161.94ms     5.82     59.5MB
## 2 pd_hilldiv(Xt_dense, tree = tree)    1.21s    1.21s     0.829  170.22MB
## 3 pd_phyloregion(X_sparse, tree)      3.19ms   4.22ms   213.       1.73MB
## # â€¦ with 1 more variable: `gc/sec` &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(results)           </a></code></pre></div>
<p><img src="Benchmark_files/figure-html/phylo_diversity-1.png" width="700"></p>
</div>
<div id="phylogenetic-beta-diversity" class="section level3">
<h3 class="hasAnchor">
<a href="#phylogenetic-beta-diversity" class="anchor"></a>Phylogenetic beta diversity</h3>
<p>Again there is a large difference in memory allocations and running time for the phylogenetic beta diversity.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">fun_phyloregion &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree) <span class="kw"><a href="../reference/phylobeta.html">phylobeta</a></span>(x, tree)[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">fun_betapart &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree) <span class="kw"><a href="https://rdrr.io/pkg/betapart/man/phylo.beta.pair.html">phylo.beta.pair</a></span>(x, tree)[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">fun_picante &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree) <span class="dv">1</span><span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/picante/man/phylosor.html">phylosor</a></span>(x, tree)</a>
<a class="sourceLine" id="cb38-4" data-line-number="4">fun_BAT &lt;-<span class="st"> </span><span class="cf">function</span>(x, tree) <span class="kw"><a href="https://rdrr.io/pkg/BAT/man/beta.html">beta</a></span>(x, tree, <span class="dt">func =</span> <span class="st">"Soerensen"</span>)[[<span class="dv">1</span>]] </a>
<a class="sourceLine" id="cb38-5" data-line-number="5"></a>
<a class="sourceLine" id="cb38-6" data-line-number="6">chk_fun &lt;-<span class="st"> </span><span class="cf">function</span>(target, current)</a>
<a class="sourceLine" id="cb38-7" data-line-number="7">    <span class="kw"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span>(target, current, <span class="dt">check.attributes =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb38-8" data-line-number="8"></a>
<a class="sourceLine" id="cb38-9" data-line-number="9">results &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/mark.html">mark</a></span>(<span class="kw">fun_picante</span>(X_dense, tree), </a>
<a class="sourceLine" id="cb38-10" data-line-number="10">                       <span class="kw">fun_betapart</span>(X_dense, tree),</a>
<a class="sourceLine" id="cb38-11" data-line-number="11">                       <span class="kw">fun_BAT</span>(X_dense, tree),</a>
<a class="sourceLine" id="cb38-12" data-line-number="12">                       <span class="kw">fun_phyloregion</span>(X_sparse, tree), <span class="dt">check=</span>chk_fun)</a></code></pre></div>
<pre><code>## Warning: Some expressions had a GC in every iteration; so filtering is disabled.</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(results)</a></code></pre></div>
<pre><code>## Warning: Some expressions had a GC in every iteration; so filtering is disabled.</code></pre>
<pre><code>## # A tibble: 4 x 6
##   expression                           min   median `itr/sec` mem_alloc `gc/sec`
##   &lt;bch:expr&gt;                      &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;
## 1 fun_picante(X_dense, tree)         2.35s    2.35s     0.426    1.24GB    0.851
## 2 fun_betapart(X_dense, tree)        2.28s    2.28s     0.438    1.24GB    1.31 
## 3 fun_BAT(X_dense, tree)             1.31s    1.31s     0.766  207.39MB    0.766
## 4 fun_phyloregion(X_sparse, tree)    4.9ms   5.16ms   177.       1.16MB    0</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(results)</a></code></pre></div>
<p><img src="Benchmark_files/figure-html/phylobeta-1.png" width="700"> Note that the picante function returns a similarity matrix while the function in betapart and phyloregion return a dissimilarity matrix.</p>
</div>
</div>
<div id="session-infomation" class="section level2">
<h2 class="hasAnchor">
<a href="#session-infomation" class="anchor"></a>Session Infomation</h2>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span>()</a></code></pre></div>
<pre><code>## R version 3.6.2 (2019-12-12)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Debian GNU/Linux 10 (buster)
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
## LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.5.so
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] microbenchmark_1.4-7 BAT_2.0.0            hilldiv_1.5.1       
##  [4] picante_1.8          nlme_3.1-144         vegan_2.5-6         
##  [7] lattice_0.20-38      permute_0.9-5        betapart_1.5.1      
## [10] phyloregion_0.1.0    ggplot2_3.2.1        bench_1.1.1.9000    
## [13] Matrix_1.2-18        ape_5.3             
## 
## loaded via a namespace (and not attached):
##   [1] backports_1.1.5         Hmisc_4.3-0             BDgraph_2.62           
##   [4] fastmatch_1.1-0         plyr_1.8.5              igraph_1.2.4.2         
##   [7] lazyeval_0.2.2          sp_1.3-2                splines_3.6.2          
##  [10] crosstalk_1.0.0         digest_0.6.23           htmltools_0.4.0        
##  [13] fansi_0.4.1             magrittr_1.5            checkmate_2.0.0        
##  [16] memoise_1.1.0           tensor_1.5              cluster_2.1.0          
##  [19] ks_1.11.6               fastcluster_1.1.25      pkgdown_1.4.1          
##  [22] pdist_1.2               prettyunits_1.1.1       jpeg_0.1-8.1           
##  [25] colorspace_1.4-1        xfun_0.12               dplyr_0.8.4            
##  [28] crayon_1.3.4            jsonlite_1.6.1          spatstat.data_1.4-3    
##  [31] spatstat_1.63-0         survival_3.1-8          phangorn_2.6.0         
##  [34] glue_1.3.1              polyclip_1.10-0         gtable_0.3.0           
##  [37] geiger_2.0.6.4          webshot_0.5.2           maps_3.3.0             
##  [40] ggm_2.3                 abind_1.4-5             scales_1.1.0           
##  [43] mvtnorm_1.0-12          miniUI_0.1.1.1          Rcpp_1.0.3             
##  [46] xtable_1.8-4            progress_1.2.2          htmlTable_1.13.3       
##  [49] magic_1.5-9             foreign_0.8-72          subplex_1.5-4          
##  [52] mclust_5.4.5            deSolve_1.27.1          Formula_1.2-3          
##  [55] stats4_3.6.2            htmlwidgets_1.5.1       RColorBrewer_1.1-2     
##  [58] lavaan_0.6-5            acepack_1.4.1           farver_2.0.3           
##  [61] pkgconfig_2.0.3         deldir_0.1-25           nnet_7.3-12            
##  [64] utf8_1.1.4              tidyselect_1.0.0        rlang_0.4.4            
##  [67] manipulateWidget_0.10.0 reshape2_1.4.3          later_1.0.0            
##  [70] munsell_0.5.0           tools_3.6.2             cli_2.0.1              
##  [73] fdrtool_1.2.15          evaluate_0.14           geometry_0.4.5         
##  [76] stringr_1.4.0           fastmap_1.0.1           goftest_1.2-2          
##  [79] yaml_2.2.1              knitr_1.28              fs_1.3.1               
##  [82] rgl_0.100.30            purrr_0.3.3             glasso_1.11            
##  [85] pbapply_1.4-2           whisker_0.4             mime_0.9               
##  [88] profmem_0.5.0           compiler_3.6.2          rstudioapi_0.10        
##  [91] beeswarm_0.2.3          png_0.1-7               e1071_1.7-3            
##  [94] ggsignif_0.6.0          spatstat.utils_1.15-0   huge_1.3.4             
##  [97] tibble_2.1.3            pbivnorm_0.6.0          stringi_1.4.5          
## [100] qgraph_1.6.4            desc_1.2.0              rgeos_0.5-2            
## [103] psych_1.9.12.31         vctrs_0.2.2             pillar_1.4.3           
## [106] lifecycle_0.1.0         data.table_1.12.8       corpcor_1.6.9          
## [109] raster_3.0-12           httpuv_1.5.2            R6_2.4.1               
## [112] latticeExtra_0.6-29     promises_1.1.0          KernSmooth_2.23-16     
## [115] gridExtra_2.3           vipor_0.4.5             codetools_0.2-16       
## [118] rcdd_1.2-2              MASS_7.3-51.4           gtools_3.8.1           
## [121] assertthat_0.2.1        rprojroot_1.3-2         rjson_0.2.20           
## [124] withr_2.1.2             mnormt_1.5-6            mgcv_1.8-31            
## [127] parallel_3.6.2          hms_0.5.3               quadprog_1.5-8         
## [130] grid_3.6.2              rpart_4.1-15            tidyr_1.0.2            
## [133] coda_0.19-3             class_7.3-15            nls2_0.2               
## [136] rmarkdown_2.1           FSA_0.8.27              hypervolume_2.0.12     
## [139] d3Network_0.5.2.1       ggpubr_0.2.4            shiny_1.4.0            
## [142] base64enc_0.1-3         ggbeeswarm_0.6.0</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#a-small-benchmark-study">A small benchmark study</a></li>
      <li><a href="#session-infomation">Session Infomation</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Barnabas H. Daru, Piyal Karunarathne, Klaus Schliep.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
